<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bt.om.mapper.ProductInfoMapper">
  <resultMap id="BaseResultMap" type="com.bt.om.entity.ProductInfo">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jun 12 10:52:24 CST 2018.
    -->
    <id column="id" jdbcType="INTEGER" property="id" />
    <result column="product_id" jdbcType="VARCHAR" property="productId" />
    <result column="product_name" jdbcType="VARCHAR" property="productName" />
    <result column="product_img_url" jdbcType="VARCHAR" property="productImgUrl" />
    <result column="product_info_url" jdbcType="VARCHAR" property="productInfoUrl" />
    <result column="product_cat" jdbcType="VARCHAR" property="productCat" />
    <result column="tk_link" jdbcType="VARCHAR" property="tkLink" />
    <result column="tkl" jdbcType="VARCHAR" property="tkl" />
    <result column="price" jdbcType="DOUBLE" property="price" />
    <result column="month_sales" jdbcType="INTEGER" property="monthSales" />
    <result column="income_rate" jdbcType="REAL" property="incomeRate" />
    <result column="commission" jdbcType="REAL" property="commission" />
    <result column="seller_wangwang" jdbcType="VARCHAR" property="sellerWangwang" />
    <result column="seller_id" jdbcType="VARCHAR" property="sellerId" />
    <result column="shop_name" jdbcType="VARCHAR" property="shopName" />
    <result column="platform_type" jdbcType="VARCHAR" property="platformType" />
    <result column="tklquan" jdbcType="VARCHAR" property="tklquan" />
    <result column="coupon_id" jdbcType="VARCHAR" property="couponId" />
    <result column="coupon_total" jdbcType="INTEGER" property="couponTotal" />
    <result column="coupon_rest" jdbcType="INTEGER" property="couponRest" />
    <result column="coupon_miane" jdbcType="VARCHAR" property="couponMiane" />
    <result column="coupon_quan" jdbcType="VARCHAR" property="couponQuan" />
    <result column="coupon_start" jdbcType="VARCHAR" property="couponStart" />
    <result column="coupon_end" jdbcType="VARCHAR" property="couponEnd" />
    <result column="coupon_link" jdbcType="VARCHAR" property="couponLink" />
    <result column="coupon_promo_link" jdbcType="VARCHAR" property="couponPromoLink" />
    <result column="ifvalid" jdbcType="INTEGER" property="ifvalid" />
    <result column="sourcefrom" jdbcType="INTEGER" property="sourcefrom" />
    <result column="create_time" jdbcType="TIMESTAMP" property="createTime" />
    <result column="update_time" jdbcType="TIMESTAMP" property="updateTime" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jun 12 10:52:24 CST 2018.
    -->
    id, product_id, product_name, product_img_url, product_info_url, product_cat, tk_link, 
    tkl, price, month_sales, income_rate, commission, seller_wangwang, seller_id, shop_name, 
    platform_type, tklquan, coupon_id, coupon_total, coupon_rest, coupon_miane, coupon_quan, 
    coupon_start, coupon_end, coupon_link, coupon_promo_link, ifvalid, sourcefrom, create_time, 
    update_time
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.Integer" resultMap="BaseResultMap">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jun 12 10:52:24 CST 2018.
    -->
    select 
    <include refid="Base_Column_List" />
    from product_info
    where id = #{id,jdbcType=INTEGER}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.Integer">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jun 12 10:52:24 CST 2018.
    -->
    delete from product_info
    where id = #{id,jdbcType=INTEGER}
  </delete>
  <insert id="insert" parameterType="com.bt.om.entity.ProductInfo">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jun 12 10:52:24 CST 2018.
    -->
    insert into product_info (id, product_id, product_name, 
      product_img_url, product_info_url, product_cat, 
      tk_link, tkl, price, 
      month_sales, income_rate, commission, 
      seller_wangwang, seller_id, shop_name, 
      platform_type, tklquan, coupon_id, 
      coupon_total, coupon_rest, coupon_miane, 
      coupon_quan, coupon_start, coupon_end, 
      coupon_link, coupon_promo_link, ifvalid, 
      sourcefrom, create_time, update_time
      )
    values (#{id,jdbcType=INTEGER}, #{productId,jdbcType=VARCHAR}, #{productName,jdbcType=VARCHAR}, 
      #{productImgUrl,jdbcType=VARCHAR}, #{productInfoUrl,jdbcType=VARCHAR}, #{productCat,jdbcType=VARCHAR}, 
      #{tkLink,jdbcType=VARCHAR}, #{tkl,jdbcType=VARCHAR}, #{price,jdbcType=DOUBLE}, 
      #{monthSales,jdbcType=INTEGER}, #{incomeRate,jdbcType=REAL}, #{commission,jdbcType=REAL}, 
      #{sellerWangwang,jdbcType=VARCHAR}, #{sellerId,jdbcType=VARCHAR}, #{shopName,jdbcType=VARCHAR}, 
      #{platformType,jdbcType=VARCHAR}, #{tklquan,jdbcType=VARCHAR}, #{couponId,jdbcType=VARCHAR}, 
      #{couponTotal,jdbcType=INTEGER}, #{couponRest,jdbcType=INTEGER}, #{couponMiane,jdbcType=VARCHAR}, 
      #{couponQuan,jdbcType=VARCHAR}, #{couponStart,jdbcType=VARCHAR}, #{couponEnd,jdbcType=VARCHAR}, 
      #{couponLink,jdbcType=VARCHAR}, #{couponPromoLink,jdbcType=VARCHAR}, #{ifvalid,jdbcType=INTEGER}, 
      #{sourcefrom,jdbcType=INTEGER}, #{createTime,jdbcType=TIMESTAMP}, #{updateTime,jdbcType=TIMESTAMP}
      )
  </insert>
  <insert id="insertSelective" parameterType="com.bt.om.entity.ProductInfo">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jun 12 10:52:24 CST 2018.
    -->
    insert into product_info
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="id != null">
        id,
      </if>
      <if test="productId != null">
        product_id,
      </if>
      <if test="productName != null">
        product_name,
      </if>
      <if test="productImgUrl != null">
        product_img_url,
      </if>
      <if test="productInfoUrl != null">
        product_info_url,
      </if>
      <if test="productCat != null">
        product_cat,
      </if>
      <if test="tkLink != null">
        tk_link,
      </if>
      <if test="tkl != null">
        tkl,
      </if>
      <if test="price != null">
        price,
      </if>
      <if test="monthSales != null">
        month_sales,
      </if>
      <if test="incomeRate != null">
        income_rate,
      </if>
      <if test="commission != null">
        commission,
      </if>
      <if test="sellerWangwang != null">
        seller_wangwang,
      </if>
      <if test="sellerId != null">
        seller_id,
      </if>
      <if test="shopName != null">
        shop_name,
      </if>
      <if test="platformType != null">
        platform_type,
      </if>
      <if test="tklquan != null">
        tklquan,
      </if>
      <if test="couponId != null">
        coupon_id,
      </if>
      <if test="couponTotal != null">
        coupon_total,
      </if>
      <if test="couponRest != null">
        coupon_rest,
      </if>
      <if test="couponMiane != null">
        coupon_miane,
      </if>
      <if test="couponQuan != null">
        coupon_quan,
      </if>
      <if test="couponStart != null">
        coupon_start,
      </if>
      <if test="couponEnd != null">
        coupon_end,
      </if>
      <if test="couponLink != null">
        coupon_link,
      </if>
      <if test="couponPromoLink != null">
        coupon_promo_link,
      </if>
      <if test="ifvalid != null">
        ifvalid,
      </if>
      <if test="sourcefrom != null">
        sourcefrom,
      </if>
      <if test="createTime != null">
        create_time,
      </if>
      <if test="updateTime != null">
        update_time,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="id != null">
        #{id,jdbcType=INTEGER},
      </if>
      <if test="productId != null">
        #{productId,jdbcType=VARCHAR},
      </if>
      <if test="productName != null">
        #{productName,jdbcType=VARCHAR},
      </if>
      <if test="productImgUrl != null">
        #{productImgUrl,jdbcType=VARCHAR},
      </if>
      <if test="productInfoUrl != null">
        #{productInfoUrl,jdbcType=VARCHAR},
      </if>
      <if test="productCat != null">
        #{productCat,jdbcType=VARCHAR},
      </if>
      <if test="tkLink != null">
        #{tkLink,jdbcType=VARCHAR},
      </if>
      <if test="tkl != null">
        #{tkl,jdbcType=VARCHAR},
      </if>
      <if test="price != null">
        #{price,jdbcType=DOUBLE},
      </if>
      <if test="monthSales != null">
        #{monthSales,jdbcType=INTEGER},
      </if>
      <if test="incomeRate != null">
        #{incomeRate,jdbcType=REAL},
      </if>
      <if test="commission != null">
        #{commission,jdbcType=REAL},
      </if>
      <if test="sellerWangwang != null">
        #{sellerWangwang,jdbcType=VARCHAR},
      </if>
      <if test="sellerId != null">
        #{sellerId,jdbcType=VARCHAR},
      </if>
      <if test="shopName != null">
        #{shopName,jdbcType=VARCHAR},
      </if>
      <if test="platformType != null">
        #{platformType,jdbcType=VARCHAR},
      </if>
      <if test="tklquan != null">
        #{tklquan,jdbcType=VARCHAR},
      </if>
      <if test="couponId != null">
        #{couponId,jdbcType=VARCHAR},
      </if>
      <if test="couponTotal != null">
        #{couponTotal,jdbcType=INTEGER},
      </if>
      <if test="couponRest != null">
        #{couponRest,jdbcType=INTEGER},
      </if>
      <if test="couponMiane != null">
        #{couponMiane,jdbcType=VARCHAR},
      </if>
      <if test="couponQuan != null">
        #{couponQuan,jdbcType=VARCHAR},
      </if>
      <if test="couponStart != null">
        #{couponStart,jdbcType=VARCHAR},
      </if>
      <if test="couponEnd != null">
        #{couponEnd,jdbcType=VARCHAR},
      </if>
      <if test="couponLink != null">
        #{couponLink,jdbcType=VARCHAR},
      </if>
      <if test="couponPromoLink != null">
        #{couponPromoLink,jdbcType=VARCHAR},
      </if>
      <if test="ifvalid != null">
        #{ifvalid,jdbcType=INTEGER},
      </if>
      <if test="sourcefrom != null">
        #{sourcefrom,jdbcType=INTEGER},
      </if>
      <if test="createTime != null">
        #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="updateTime != null">
        #{updateTime,jdbcType=TIMESTAMP},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.bt.om.entity.ProductInfo">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jun 12 10:52:24 CST 2018.
    -->
    update product_info
    <set>
      <if test="productId != null">
        product_id = #{productId,jdbcType=VARCHAR},
      </if>
      <if test="productName != null">
        product_name = #{productName,jdbcType=VARCHAR},
      </if>
      <if test="productImgUrl != null">
        product_img_url = #{productImgUrl,jdbcType=VARCHAR},
      </if>
      <if test="productInfoUrl != null">
        product_info_url = #{productInfoUrl,jdbcType=VARCHAR},
      </if>
      <if test="productCat != null">
        product_cat = #{productCat,jdbcType=VARCHAR},
      </if>
      <if test="tkLink != null">
        tk_link = #{tkLink,jdbcType=VARCHAR},
      </if>
      <if test="tkl != null">
        tkl = #{tkl,jdbcType=VARCHAR},
      </if>
      <if test="price != null">
        price = #{price,jdbcType=DOUBLE},
      </if>
      <if test="monthSales != null">
        month_sales = #{monthSales,jdbcType=INTEGER},
      </if>
      <if test="incomeRate != null">
        income_rate = #{incomeRate,jdbcType=REAL},
      </if>
      <if test="commission != null">
        commission = #{commission,jdbcType=REAL},
      </if>
      <if test="sellerWangwang != null">
        seller_wangwang = #{sellerWangwang,jdbcType=VARCHAR},
      </if>
      <if test="sellerId != null">
        seller_id = #{sellerId,jdbcType=VARCHAR},
      </if>
      <if test="shopName != null">
        shop_name = #{shopName,jdbcType=VARCHAR},
      </if>
      <if test="platformType != null">
        platform_type = #{platformType,jdbcType=VARCHAR},
      </if>
      <if test="tklquan != null">
        tklquan = #{tklquan,jdbcType=VARCHAR},
      </if>
      <if test="couponId != null">
        coupon_id = #{couponId,jdbcType=VARCHAR},
      </if>
      <if test="couponTotal != null">
        coupon_total = #{couponTotal,jdbcType=INTEGER},
      </if>
      <if test="couponRest != null">
        coupon_rest = #{couponRest,jdbcType=INTEGER},
      </if>
      <if test="couponMiane != null">
        coupon_miane = #{couponMiane,jdbcType=VARCHAR},
      </if>
      <if test="couponQuan != null">
        coupon_quan = #{couponQuan,jdbcType=VARCHAR},
      </if>
      <if test="couponStart != null">
        coupon_start = #{couponStart,jdbcType=VARCHAR},
      </if>
      <if test="couponEnd != null">
        coupon_end = #{couponEnd,jdbcType=VARCHAR},
      </if>
      <if test="couponLink != null">
        coupon_link = #{couponLink,jdbcType=VARCHAR},
      </if>
      <if test="couponPromoLink != null">
        coupon_promo_link = #{couponPromoLink,jdbcType=VARCHAR},
      </if>
      <if test="ifvalid != null">
        ifvalid = #{ifvalid,jdbcType=INTEGER},
      </if>
      <if test="sourcefrom != null">
        sourcefrom = #{sourcefrom,jdbcType=INTEGER},
      </if>
      <if test="createTime != null">
        create_time = #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="updateTime != null">
        update_time = #{updateTime,jdbcType=TIMESTAMP},
      </if>
    </set>
    where id = #{id,jdbcType=INTEGER}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.bt.om.entity.ProductInfo">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Jun 12 10:52:24 CST 2018.
    -->
    update product_info
    set product_id = #{productId,jdbcType=VARCHAR},
      product_name = #{productName,jdbcType=VARCHAR},
      product_img_url = #{productImgUrl,jdbcType=VARCHAR},
      product_info_url = #{productInfoUrl,jdbcType=VARCHAR},
      product_cat = #{productCat,jdbcType=VARCHAR},
      tk_link = #{tkLink,jdbcType=VARCHAR},
      tkl = #{tkl,jdbcType=VARCHAR},
      price = #{price,jdbcType=DOUBLE},
      month_sales = #{monthSales,jdbcType=INTEGER},
      income_rate = #{incomeRate,jdbcType=REAL},
      commission = #{commission,jdbcType=REAL},
      seller_wangwang = #{sellerWangwang,jdbcType=VARCHAR},
      seller_id = #{sellerId,jdbcType=VARCHAR},
      shop_name = #{shopName,jdbcType=VARCHAR},
      platform_type = #{platformType,jdbcType=VARCHAR},
      tklquan = #{tklquan,jdbcType=VARCHAR},
      coupon_id = #{couponId,jdbcType=VARCHAR},
      coupon_total = #{couponTotal,jdbcType=INTEGER},
      coupon_rest = #{couponRest,jdbcType=INTEGER},
      coupon_miane = #{couponMiane,jdbcType=VARCHAR},
      coupon_quan = #{couponQuan,jdbcType=VARCHAR},
      coupon_start = #{couponStart,jdbcType=VARCHAR},
      coupon_end = #{couponEnd,jdbcType=VARCHAR},
      coupon_link = #{couponLink,jdbcType=VARCHAR},
      coupon_promo_link = #{couponPromoLink,jdbcType=VARCHAR},
      ifvalid = #{ifvalid,jdbcType=INTEGER},
      sourcefrom = #{sourcefrom,jdbcType=INTEGER},
      create_time = #{createTime,jdbcType=TIMESTAMP},
      update_time = #{updateTime,jdbcType=TIMESTAMP}
    where id = #{id,jdbcType=INTEGER}
  </update>

	<select id="selectByProductId" parameterType="java.lang.String" resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from product_info
		where product_id = #{productId,jdbcType=VARCHAR}
	</select>

	<select id="selectByProductIds" parameterType="java.util.Map" resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from product_info
		where product_id in
		<foreach close=")" collection="list" index="index" item="item" open="(" separator=",">
			#{item}
		</foreach>
	</select>

	<select id="selectList" parameterType="com.bt.om.entity.ProductInfo" resultMap="BaseResultMap">
		select
		product_id
		from product_info where DATE_FORMAT(update_time, '%Y-%m-%d') &lt;= DATE_FORMAT(#{updateTime,jdbcType=TIMESTAMP}, '%Y-%m-%d')
		limit
		#{size,jdbcType=INTEGER}
	</select>

	<update id="updateByProductId" parameterType="com.bt.om.entity.ProductInfo">
		update product_info
		set
		commission = #{commission,jdbcType=REAL},
		update_time=#{updateTime,jdbcType=TIMESTAMP}
		where product_id = #{productId,jdbcType=INTEGER}
	</update>
	
	<select id="selectProductInfoListRand" parameterType="java.lang.Integer" resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from product_info WHERE 1=1 and ifvalid=2 and sourcefrom=1
		order by RAND() LIMIT #{size,jdbcType=INTEGER}
	</select>
	
	<select id="selectProductInfoListCount" parameterType="map" resultType="int">
		select
		count(*)
		from product_info WHERE 1=1	
		<if test="productName != null">
			and product_name like
			concat(concat("%",#{productName,jdbcType=VARCHAR}),"%")
		</if>
		and ifvalid=2 and sourcefrom=1	
	</select>

	<select id="selectProductInfoList" parameterType="map" resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from product_info WHERE 1=1
		<if test="productName != null">
			and product_name like
			concat(concat("%",#{productName,jdbcType=VARCHAR}),"%")
		</if>
		and ifvalid=2 and sourcefrom=1
		order by id desc
	</select>
	
	<select id="selectAllList" resultMap="BaseResultMap">
		select
		<include refid="Base_Column_List" />
		from product_info where ifvalid=1 and sourcefrom=1 limit 200
	</select>
</mapper>